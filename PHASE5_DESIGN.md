# フェーズ5: サバイバル・クラフトシステム設計

## 概要
ローグライクRPGとマルチプレイヤーシステムに、サバイバル・クラフト要素を導入し、より戦略的で深みのあるゲーム体験を実現します。

## 主要な新システム

### 1. リソース収集システム
- **リソースタイプ**:
  - 木材 (Wood): 基本的な建築・クラフト素材
  - 鉱石 (Ore): 金属装備の素材
  - 薬草 (Herb): 回復アイテムの素材
  - 魔法の結晶 (Crystal): 魔法装備の素材
  - 食材 (Food): 料理の素材

- **希少度レベル**:
  - Common: 基本素材
  - Rare: 上位クラフトに必要
  - Epic: 強力な装備の素材
  - Legendary: 最高級装備の素材

- **採取メカニクス**:
  - ダンジョン内に採取ポイント配置
  - 採取にスタミナ消費
  - スキルレベルで採取量・品質向上
  - リソースは時間経過で再生成

### 2. クラフトシステム
- **クラフト可能アイテム**:
  - 武器・防具（既存の装備をクラフト可能に）
  - 消費アイテム（回復薬、バフポーション）
  - 基地設備
  - 特殊アイテム（テレポートストーン等）

- **レシピシステム**:
  - 基本レシピは最初から利用可能
  - 特定の組み合わせを試すことで新レシピ発見
  - クエスト報酬やショップで購入
  - レシピブックで管理

- **品質システム**:
  - クラフトレベルで品質向上
  - ランダムで品質にばらつき（Normal/Fine/Superior/Masterwork）
  - 品質が高いほど性能アップ

- **強化システム**:
  - 既存装備に強化素材を使って性能向上
  - +1～+10まで強化可能
  - 失敗リスクあり（高レベルほど失敗率上昇）

### 3. 基地建設システム
- **基地の概念**:
  - プレイヤー専用の安全な空間
  - ダンジョンから帰還できる拠点

- **設置可能施設**:
  - クラフトステーション: 高度なクラフトを可能に
  - 倉庫: アイテム保管容量拡張
  - 訓練場: 経験値獲得、ステータス一時強化
  - 農園: 食材を栽培
  - 鍛冶場: 装備強化の成功率向上
  - 錬金術ラボ: ポーション効果強化

- **建設メカニクス**:
  - リソースを消費して施設建設
  - 施設のレベルアップで機能強化
  - 配置を自由に変更可能

### 4. スタミナ・空腹システム
- **スタミナ**:
  - 最大値100
  - 戦闘、採取、クラフト、建設で消費
  - 時間経過で自然回復
  - 食事で即座に回復

- **空腹度**:
  - 0-100で管理
  - 時間経過で増加
  - 100に達するとスタミナ回復停止、徐々にHP減少
  - 食事で減少

- **料理システム**:
  - 複数の食材を組み合わせ
  - 組み合わせで効果が変化
  - 一時的なステータスバフ付与可能

### 5. ダイナミック環境システム
- **昼夜サイクル**:
  - 1サイクル = 20分（実時間）
  - 昼: 通常
  - 夜: 敵のステータス1.5倍、レアリソース出現率アップ

- **天候システム**:
  - 晴れ: 通常
  - 雨: 採取効率低下、水属性強化
  - 雪: 移動速度低下、氷属性強化
  - 嵐: 戦闘難易度上昇、レアドロップ率アップ

- **季節システム**:
  - 春夏秋冬が順に切り替わる（各1時間実時間）
  - 季節限定リソース
  - 季節イベント

### 6. クエストシステム
- **クエストタイプ**:
  - 収集クエスト: 特定アイテムの納品
  - 討伐クエスト: モンスター撃破
  - 探索クエスト: 特定の場所到達
  - クラフトクエスト: 特定アイテムのクラフト

- **クエスト難易度**:
  - Easy, Normal, Hard, Expert

- **報酬**:
  - ゴールド
  - 経験値
  - 特別なレシピ
  - レアリソース
  - 名声ポイント

- **デイリー/ウィークリー**:
  - 日替わり・週替わりでランダム生成
  - 繰り返し受注可能
  - ボーナス報酬あり

### 7. ギルドシステム（マルチプレイヤー拡張）
- **ギルド作成**:
  - ゴールドを消費して作成
  - ギルド名、紋章の設定
  - 最大メンバー数: 20人

- **ギルド機能**:
  - ギルドチャット
  - ギルド倉庫（共有リソース）
  - ギルド掲示板（クエスト共有）
  - ギルドスキル（全メンバーにバフ）

- **ギルドレイド**:
  - 強力なレイドボスに複数人で挑戦
  - ギルドポイント獲得
  - 特別な報酬

- **ギルドランキング**:
  - ギルドポイントで競争
  - 上位ギルドに特典

### 8. トレードシステム
- **プレイヤー間取引**:
  - アイテム・リソースの交換
  - ゴールド取引
  - 取引ウィンドウで安全に実施

- **オークションハウス**:
  - アイテムを出品・入札
  - 自動マッチング
  - 手数料システム

## 既存システムとの統合

### RPGシステム拡張
- 新スキル追加:
  - Mining（採掘）: 鉱石採取効率向上
  - Herbalism（薬草学）: 薬草採取効率向上
  - Craftsmanship（工芸）: クラフト品質向上
  - Cooking（料理）: 料理効果向上
  - Building（建築）: 建設コスト削減

### ダンジョンシステム拡張
- リソースノード配置
- 環境要素の追加（天候、時間）
- 採取可能オブジェクト
- NPCクエストギバー配置

### マルチプレイヤー拡張
- 協力採取（近くのプレイヤーにボーナス）
- トレード機能
- ギルドチャット
- ギルドレイド

### UI/UX改善
- クラフトメニュー
- リソース管理画面
- 基地建設モード
- クエストログ
- ギルド管理画面
- 環境情報HUD

## 実装優先順位

### フェーズ5-2（基本実装）:
1. リソースシステムの基盤
2. 基本的なクラフトシステム
3. スタミナ・空腹システム
4. クラフトUI

### フェーズ5-3（発展）:
1. 基地建設システム
2. クエストシステム
3. 昼夜・天候システム
4. ギルドシステム
5. トレードシステム
6. 全UIの統合と洗練

### フェーズ5-4（検証・調整）:
1. バランス調整
2. バグ修正
3. パフォーマンス最適化
4. v5バージョン保存

## 技術的考慮事項

- リソースの永続化（LocalStorageまたはモックサーバー）
- 時間システムの同期（マルチプレイヤー対応）
- UIのレスポンシブ性
- パフォーマンス（多数のオブジェクト管理）
- セーブ/ロード機能の強化
